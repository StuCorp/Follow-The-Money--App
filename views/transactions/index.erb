<h1>Transactions this month!</h1>

<div class='sub-menu-container'>
  <div class='sub-menu'>

    <div class='this-month'><a href="/transactions">this month</a><img src=''/></div>

    <div class='by-tag'><a href="/tags/transactions_by_tag">by tag</a><img src=''/></div>

    <div class='by-provider'><a href="/providers/transactions_by_provider">by providers</a><img src=''/></div>

    <div class='luxury'>luxury overload<img src=''/></div>
    <div class='all'>lifetime<img src=''/></div>
  </div>
</div>



<p><a href="/transactions/new">Make new transaction!</a></p>


<table>
  <caption>Whatever! </caption>
  <thead>
    <tr>
      <th scope="col">Transaction ID</th>
      <th scope="col">Date</th>
      <th scope="col">User</th>
      <th scope="col">Item</th>
      <th scope="col">Cost</th>
      <th scope="col">Tag</th>
      <th scope="col">Luxury?</th>
      <th scope="col">Edit</th>
    </tr>
  </thead>

  <!-- can we put a sum variable that calculates the total.. -->
  <% total = 0%>

  <%for transaction_info in @transaction_infos %>

  <td><%=transaction_info.buy_date%></td>
  <td><%=transaction_info.transaction_id%></td>
  <td><%=transaction_info.user_name%></td>
  <td><%=transaction_info.transaction_name%></td>
  <td>£<%='%.2f'%((transaction_info.transaction_cost.to_f)/100)%>
  </td>
  <%total += transaction_info.transaction_cost%>
  <td><%=transaction_info.tag_name%></td>
  <td><%=transaction_info.transaction_luxury%></td>
  <td><a href="/transactions/<%=transaction_info.transaction_id%>/edit">edit!</a><a href="/transactions/<%=transaction_info.transaction_id%>/delete"> delete!</a></td>
</tr>
<%end %>
<tr>
  <td/><td/><td/><td>Total: </td><td>£<%=TransactionInfo.format_pennies(total)%></td><td><td/>
</tr>
</table>

<h2><%=@user.name%> has £<%= TransactionInfo.format_pennies(@user.budget - total)%> of his monthly £<%=TransactionInfo.format_pennies(@user.budget)%></h2>


